# Инструкции по запуску бота

Ваш бот-трекер активностей полностью реализован!

Для запуска бота выполните следующие шаги:

1.  **Настройка переменных окружения:**
    *   Убедитесь, что в корне вашего проекта есть файл `.env`.
    *   Откройте файл `.env` и укажите ваш токен Telegram-бота:
        ```
        BOT_TOKEN="ВАШ_ТЕЛЕГРАМ_БОТ_ТОКЕН"
        ```
    *   Если вы планируете использовать режим **вебхуков (Webhook)**, вам потребуется публичный URL, по которому Telegram сможет отправлять обновления (например, через `ngrok` или собственный домен). В файле `src/main.py` измените строку `WEBHOOK_URL` на ваш базовый URL:
        ```python
        WEBHOOK_URL = "https://ваш-публичный-url.com" + WEBHOOK_PATH
        ```

2.  **Установка зависимостей:**
    *   Если вы еще этого не сделали, установите все необходимые библиотеки в ваше виртуальное окружение:
        ```bash
        pip install -r requirements.txt
        ```

3.  **Применение миграций базы данных:**
    *   Убедитесь, что миграции Alembic применены к вашей базе данных. Если вы следовали всем моим инструкциям, они уже должны быть применены. В противном случае, выполните:
        ```bash
        ./.venv/bin/alembic upgrade head
        ```
        Это создаст необходимые таблицы `activities` и `activity_logs` в файле `tracker.db`.

4.  **Запуск бота:**

    Вы можете запустить бота в двух режимах:

    *   **Режим Long-Polling (для локальной разработки и отладки):**
        Этот режим удобен, когда вы разрабатываете бота локально и не хотите настраивать вебхуки. Бот будет напрямую опрашивать Telegram на наличие новых сообщений.
        
        Наиболее правильный способ запуска - из корневой директории проекта как модуль:
        ```bash
        python -m src.main
        ```
        
        Я также добавил исправление в `src/main.py`, которое позволяет запускать файл напрямую, как вы и пытались:
        ```bash
        python src/main.py
        ```

    *   **Режим Webhook (для продакшена):**
        Этот режим более эффективен и является предпочтительным для развертывания бота на сервере. Он требует, чтобы ваш FastAPI-сервер был доступен из интернета по указанному `WEBHOOK_URL`.
        ```bash
        uvicorn src.main:app --host 0.0.0.0 --port 8000
        ```
        После запуска, бот сам установит вебхук в Telegram при первом запуске (если `WEBHOOK_URL` отличается от текущего).

После запуска бота, отправьте ему команду `/start` в Telegram, чтобы начать взаимодействие.
